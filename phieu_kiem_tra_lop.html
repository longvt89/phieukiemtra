<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Phi·∫øu ƒê√°nh Gi√° Hi·ªán Tr·∫°ng L·ªëp</title>
    <style>
        /* Reset CSS */
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: Arial, sans-serif; background-color: #f5f5f5; padding: 15px; }
        .container { max-width: 750px; margin: 0 auto; background: white; box-shadow: 0 0 8px rgba(0,0,0,0.1); border-radius: 6px; overflow: hidden; }
        .form-section { padding: 15px; }
        .print-section {
            background: white;
            width: 148mm; /* Chi·ªÅu r·ªông A5 */
            height: 205mm; /* ƒê·ªß kh√¥ng gian ƒë·ªÉ ch·ªØ to h∆°n, s·∫Ω ph·ª• thu·ªôc v√†o c√†i ƒë·∫∑t in c·ªßa tr√¨nh duy·ªát */
            margin: 0 auto;
            padding: 7mm; /* Gi·ªØ padding ƒë·ªÉ n·ªôi dung kh√¥ng qu√° s√°t m√©p */
            font-size: 11px; /* TƒÇNG FONT T·ªîNG TH·ªÇ */
            line-height: 1.25; /* TƒÉng line-height ƒë·ªÉ d·ªÖ ƒë·ªçc */
            overflow: hidden;
        }
        .header { display: flex; align-items: center; border-bottom: 2px solid #333; padding-bottom: 10px; margin-bottom: 15px; }
        .logo { width: 65px; height: 65px; background: #4472C4; border-radius: 50%; display: flex; align-items: center; justify-content: center; color: white; font-weight: bold; font-size: 26px; margin-right: 15px; }
        .company-info { flex: 1; }
        .company-name { font-size: 17px; font-weight: bold; color: #4472C4; margin-bottom: 3px; }
        .company-details { font-size: 10.5px; color: #666; line-height: 1.15; }
        .qr-code { width: 45px; height: 45px; background: #333; display: flex; align-items: center; justify-content: center; color: white; font-size: 9px; }
        .title { text-align: center; font-size: 15px; font-weight: bold; background: #4472C4; color: white; padding: 6px; margin-bottom: 10px; }
        .tread-depth-section { display: flex; margin-bottom: 12px; }
        .depth-legend { flex: 1; margin-right: 20px; }
        .legend-title { font-weight: bold; margin-bottom: 8px; font-size: 12px; }
        .legend-items { display: flex; flex-wrap: wrap; gap: 10px; }
        .legend-item { display: flex; align-items: center; gap: 5px; font-size: 11px; }
        .shape { width: 16px; height: 11px; border: 1px solid; }
        .green-square { border-color: #00B050; background: #00B050; }
        .yellow-triangle { width: 0; height: 0; border-left: 9px solid transparent; border-right: 9px solid transparent; border-bottom: 13px solid #FFC000; }
        .red-circle { border-color: #C5504B; border-radius: 50%; background: #C5504B; }
        .tire-positions { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-top: 10px; margin-bottom: 5px; }
        .position { text-align: center; font-size: 11px; }
        .position-label { font-weight: bold; margin-bottom: 3px; }
        .position-shapes { display: flex; justify-content: center; gap: 2px; }
        .recommendations { flex: 1; border: 1px solid #ccc; padding: 8px; }
        .rec-title { font-weight: bold; margin-bottom: 8px; font-size: 12px; }
        .rec-item { display: flex; align-items: center; gap: 5px; margin-bottom: 5px; font-size: 10.5px; }
        .checkbox { width: 13px; height: 13px; border: 1px solid #333; }
        .car-diagram { text-align: center; margin: 12px 0; position: relative; width: 190px; height: 285px; margin-left: auto; margin-right: auto;} /* Set explicit size for the container */
        .car-diagram img { position: absolute; top: 0; left: 0; width: 100%; height: 100%; object-fit: contain; } /* Make the image fill the container */
        .car-svg { position: absolute; top: 0; left: 0; width: 100%; height: 100%; overflow: visible; } /* Overlay SVG on top of the image */
        /* TƒÉng k√≠ch th∆∞·ªõc font cho c√°c th√¥ng s·ªë l·ªëp tr√™n SVG */
        .tire-measurements text { font-size: 8px; } /* TƒÉng font cho mm v√† kg/cm2 */
        .tire-measurements rect { stroke-width: 0.6; }
        .tire-measurements g[transform*="translate"] rect { width: 48px; height: 20px; }
        .tire-measurements g[transform*="translate"] text { font-size: 8px; } /* TƒÉng font cho gi√° tr·ªã mm */
        .tire-measurements g[transform*="translate"] rect[fill="#4472C4"] { height: 16px; }
        .tire-measurements g[transform*="translate"] text[fill="white"] { font-size: 7px; } /* TƒÉng font cho gi√° tr·ªã kg/cm2 */
        #tire-size-box { stroke-width: 1.1; }
        #tire-size-text { font-size: 10px; font-weight: bold; fill: red; } /* TƒÉng font cho Size L·ªëp */
        .note-section { margin-top: 10px; font-size: 11px; } /* TƒÉng font cho L∆∞u √Ω v√† Hi·ªán tr·∫°ng l·ªëp */
        .info-section { display: grid; grid-template-columns: 1fr 1fr; gap: 8px; margin-top: 10px; font-size: 12px; } /* TƒÉng font cho th√¥ng tin chung cu·ªëi phi·∫øu */
        .info-item { border-bottom: 1px dotted #333; padding-bottom: 2px; }
        .controls { padding: 20px; background: #f8f9fa; border-top: 1px solid #ddd; }
        .control-group { margin-bottom: 15px; }
        .control-group label { display: block; margin-bottom: 5px; font-weight: bold; }
        .control-group input, .control-group select { width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 4px; }
        .tire-inputs { display: grid; grid-template-columns: repeat(2, 1fr); gap: 10px; margin-bottom: 10px; }
        .tire-input-group { border: 1px solid #ddd; padding: 5px; border-radius: 4px; background: white; }
        .tire-input-group h4 { margin-bottom: 10px; text-align: center; color: #4472C4; }
        .depth-inputs { display: grid; grid-template-columns: 1fr 1fr; gap: 5px; margin-bottom: 10px; }
        .depth-inputs input { width: 100px; padding: 4px; font-size: 12px; text-align: center; }
        .pressure-input { width: 100%; width: 130px; padding: 4px; text-align: center; }
        .buttons { display: flex; gap: 10px; justify-content: center; }
        .btn { padding: 10px 20px; border: none; border-radius: 4px; cursor: pointer; font-size: 14px; }
        .btn-primary { background: #4472C4; color: white; }
        .btn-success { background: #28a745; color: white; }
        .btn:hover { opacity: 0.8; }

        /* CSS cho ch·∫ø ƒë·ªô in */
        @media print {
            body { margin: 0; padding: 0; background: white; -webkit-print-color-adjust: exact !important; color-adjust: exact !important; }
            .container { box-shadow: none; max-width: none; }
            .form-section, .controls { display: none; }
            .print-section {
                width: 148mm;
                height: 205mm; /* ƒê·∫£m b·∫£o chi·ªÅu cao n√†y ƒë·ªÉ v·ª´a 1 trang A5 (210mm - 5mm l·ªÅ t·ªïng c·ªông) */
                margin: 0;
                padding: 7mm; /* Gi·ªØ nguy√™n l·ªÅ ƒë·ªÉ n·ªôi dung kh√¥ng b·ªã s√°t m√©p */
                page-break-inside: avoid;
                font-size: 11px; /* √Åp d·ª•ng font size cho in */
                line-height: 1.25;
            }
            /* ƒê·∫£m b·∫£o c√°c ph·∫ßn t·ª≠ SVG v√† ·∫£nh ƒë∆∞·ª£c in ƒë√∫ng k√≠ch th∆∞·ªõc */
            .car-diagram {
                width: 190px !important;
                height: 285px !important;
            }
            .car-diagram img {
                width: 100% !important;
                height: 100% !important;
            }
            .car-svg {
                width: 100% !important;
                height: 100% !important;
            }
            /* ƒê·∫£m b·∫£o c√°c font size ƒë∆∞·ª£c √°p d·ª•ng khi in */
            .tire-measurements text {
                font-size: 8px !important;
            }
            .tire-measurements rect {
                stroke-width: 0.6 !important;
            }
            .tire-measurements g[transform*="translate"] rect {
                width: 48px !important;
                height: 20px !important;
            }
            .tire-measurements g[transform*="translate"] text {
                font-size: 8px !important;
            }
            .tire-measurements g[transform*="translate"] rect[fill="#4472C4"] {
                height: 16px !important;
            }
            .tire-measurements g[transform*="translate"] text[fill="white"] {
                font-size: 7px !important;
            }
            #tire-size-box {
                stroke-width: 1.1 !important;
            }
            #tire-size-text {
                font-size: 10px !important;
                font-weight: bold !important;
            }
            .logo {
                width: 65px !important;
                height: 65px !important;
                font-size: 26px !important;
            }
            .qr-code {
                width: 45px !important;
                height: 45px !important;
                font-size: 9px !important;
            }
            .company-name {
                font-size: 17px !important;
            }
            .company-details {
                font-size: 10.5px !important;
            }
            .title {
                font-size: 15px !important;
            }
            .legend-title {
                font-size: 12px !important;
            }
            .legend-item {
                font-size: 11px !important;
            }
            .shape {
                width: 16px !important;
                height: 11px !important;
            }
            .yellow-triangle {
                border-left: 9px solid transparent !important;
                border-right: 9px solid transparent !important;
                border-bottom: 13px solid #FFC000 !important;
            }
            .position {
                font-size: 11px !important;
            }
            .rec-title {
                font-size: 12px !important;
            }
            .rec-item {
                font-size: 10.5px !important;
            }
            .checkbox {
                width: 13px !important;
                height: 13px !important;
            }
            .note-section {
                font-size: 11px !important;
            }
            .info-section {
                font-size: 12px !important;
            }
            /* ƒê·∫£m b·∫£o l·ªÅ trang in ƒë∆∞·ª£c ƒë·∫∑t t·ªëi thi·ªÉu */
            @page {
                size: A5 portrait; /* ƒê·∫£m b·∫£o k√≠ch th∆∞·ªõc A5 v√† h∆∞·ªõng d·ªçc */
                margin: 3mm; /* L·ªÅ ƒë·ªÅu 3mm cho t·∫•t c·∫£ c√°c c·∫°nh */
            }
        }
        .hidden { display: none; }
    </style>
</head>
<body>
    <div class="container">
        <div class="form-section">
            <h2 style="text-align: center; color: #4472C4; margin-bottom: 15px; font-size: 16px;">PHI·∫æU ƒê√ÅNH GI√Å HI·ªÜN TR·∫†NG L·ªêP</h2>
            
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-bottom: 15px;">
                <div class="control-group">
                    <label>Hi·ªán tr·∫°ng l·ªëp:</label>
                    <input type="text" id="tireOverallCondition" placeholder="Nh·∫≠p hi·ªán tr·∫°ng l·ªëp">
                </div>
                <div class="control-group">
                    <label>Ng√†y:</label>
                    <input type="date" id="inspectionDate">
                </div>
            </div>

            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-bottom: 15px;">
                <div class="control-group">
                    <label>Bi·ªÉn s·ªë xe:</label>
                    <input type="text" id="licensePlate" placeholder="Nh·∫≠p bi·ªÉn s·ªë xe">
                </div>
                <div class="control-group">
                    <label>K·ªπ thu·∫≠t vi√™n:</label>
                    <input type="text" id="technician" placeholder="T√™n k·ªπ thu·∫≠t vi√™n">
                </div>
            </div>

            <div class="control-group">
                <label>S·ªë ƒëi·ªán tho·∫°i:</label>
                <input type="text" id="phoneNumber" placeholder="S·ªë ƒëi·ªán tho·∫°i li√™n h·ªá">
            </div>

            <h3 style="margin: 15px 0 10px 0; color: #4472C4; font-size: 12px;">Th√¥ng s·ªë l·ªëp xe:</h3>
            <div class="control-group" style="margin-bottom: 15px;">
                <label>Size l·ªëp:</label>
                <input type="text" id="tireSizeInput" placeholder="Nh·∫≠p size l·ªëp (v√≠ d·ª•: 205/55R16)">
            </div>
            <div class="tire-inputs">
                <div class="tire-input-group">
                    <h4>1: FL (Tr∆∞·ªõc tr√°i)</h4>
                    <div class="depth-inputs">
                        <input type="number" id="fl-inner" placeholder="Trong (mm)" step="0.1">
                        <input type="number" id="fl-outer" placeholder="Ngo√†i (mm)" step="0.1">
                    </div>
                    <input type="number" class="pressure-input" id="fl-pressure" placeholder="√Åp su·∫•t (kg/cm¬≤)" step="0.1">
                </div>

                <div class="tire-input-group">
                    <h4>2: FR (Tr∆∞·ªõc ph·∫£i)</h4>
                    <div class="depth-inputs">
                        <input type="number" id="fr-inner" placeholder="Trong (mm)" step="0.1">
                        <input type="number" id="fr-outer" placeholder="Ngo√†i (mm)" step="0.1">
                    </div>
                    <input type="number" class="pressure-input" id="fr-pressure" placeholder="√Åp su·∫•t (kg/cm¬≤)" step="0.1">
                </div>

                <div class="tire-input-group">
                    <h4>3: RL (Sau tr√°i)</h4>
                    <div class="depth-inputs">
                        <input type="number" id="rl-inner" placeholder="Trong (mm)" step="0.1">
                        <input type="number" id="rl-outer" placeholder="Ngo√†i (mm)" step="0.1">
                    </div>
                    <input type="number" class="pressure-input" id="rl-pressure" placeholder="√Åp su·∫•t (kg/cm¬≤)" step="0.1">
                </div>

                <div class="tire-input-group">
                    <h4>4: RR (Sau ph·∫£i)</h4>
                    <div class="depth-inputs">
                        <input type="number" id="rr-inner" placeholder="Trong (mm)" step="0.1">
                        <input type="number" id="rr-outer" placeholder="Ngo√†i (mm)" step="0.1">
                    </div>
                    <input type="number" class="pressure-input" id="rr-pressure" placeholder="√Åp su·∫•t (kg/cm¬≤)" step="0.1">
                </div>
            </div>

            <div class="control-group">
                <label>L·ªëp d·ª± ph√≤ng:</label>
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 8px; margin-bottom: 8px;">
                    <input type="number" id="spare-depth" placeholder="ƒê·ªô s√¢u (mm)" step="0.1">
                    <input type="number" id="spare-pressure" placeholder="√Åp su·∫•t (kg/cm¬≤)" step="0.1">
                </div>
                <label style="margin-top: 8px; display: block; font-size: 10px;">Khuy·∫øn c√°o l·ªëp d·ª± ph√≤ng:</label>
                <div class="recommendation-checkboxes" style="display: flex; flex-wrap: wrap; gap: 8px; font-size: 9px;">
                    <label><input type="checkbox" data-rec-id="can-chinh-thuoc-lai"> C·∫ßn ch·ªânh th∆∞·ªõc l√°i</label>
                    <label><input type="checkbox" data-rec-id="can-bang-dong"> C√¢n b·∫±ng ƒë·ªông</label>
                    <label><input type="checkbox" data-rec-id="dao-lop"> ƒê·∫£o l·ªëp</label>
                    <label><input type="checkbox" data-rec-id="thay-the"> Thay th·∫ø</label>
                </div>
            </div>
        </div>

        <div class="controls">
            <div class="buttons">
                <button class="tire-form-button" onclick="window.location.href='https://longvt89.github.io/phieukiemtra'">üìÑ Phi·∫øu Ki·ªÉm Tra Xe</button>
                <button class="btn btn-primary" onclick="updatePreview()">C·∫≠p nh·∫≠t xem tr∆∞·ªõc</button>
                <button class="btn btn-success" onclick="printForm()">In phi·∫øu (A5)</button>
            </div>
        </div>

        <div class="print-section" id="printSection">
            <div class="header">
                <div class="logo">PL</div>
                <div class="company-info">
                    <div class="company-name">C√îNG TY TNHH √î T√î PHI LONG</div>
                    <div class="company-details">
                        H·ªÜ TH·ªêNG L·∫ÆP XE - S·ª¨A CH·ªÆA - CHƒÇM S√ìC √î T√î CAO C·∫§P<br>
                        www.philongauto.com&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Email: info@philongauto.com<br>
                        0975 76 777 - 0975 76 7778&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CSKH: 0981 086 777 - FAX: 0866 478 777
                    </div>
                </div>
                <div class="qr-code">QR</div>
            </div>

            <div class="title">PHI·∫æU ƒê√ÅNH GI√Å HI·ªÜN TR·∫†NG L·ªêP</div>

            <div class="tread-depth-section">
                <div class="depth-legend">
                    <div class="legend-title">ƒê·ªô s√¢u gai l·ªëp</div>
                    <div class="legend-items">
                        <div class="legend-item">
                            <div class="shape green-square"></div>
                            <span>>4mm</span>
                        </div>
                        <div class="legend-item">
                            <div class="shape yellow-triangle"></div>
                            <span>3-4mm</span>
                        </div>
                        <div class="legend-item">
                            <div class="shape red-circle"></div>
                            <span>1,6 - 3mm</span>
                        </div>
                    </div>

                    <div style="margin-top: 10px;">
                        <div class="tire-positions">
                            <div class="position">
                                <div class="position-label">1: FL</div>
                                <div class="position-shapes" id="fl-shapes">
                                    </div>
                            </div>
                            <div class="position">
                                <div class="position-label">2: FR</div>
                                <div class="position-shapes" id="fr-shapes">
                                    </div>
                            </div>
                            <div class="position">
                                <div class="position-label">3: RL</div>
                                <div class="position-shapes" id="rl-shapes">
                                    </div>
                            </div>
                            <div class="position">
                                <div class="position-label">4: RR</div>
                                <div class="position-shapes" id="rr-shapes">
                                    </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="recommendations">
                    <div class="rec-title">Khuy·∫øn c√°o</div>
                    <div class="rec-item">
                        <div class="checkbox" id="rec-1"></div>
                        <span>C·∫ßn ch·ªânh th∆∞·ªõc l√°i</span>
                    </div>
                    <div class="rec-item">
                        <div class="checkbox" id="rec-2"></div>
                        <span>C√¢n b·∫±ng ƒë·ªông</span>
                    </div>
                    <div class="rec-item">
                        <div class="checkbox" id="rec-3"></div>
                        <span>ƒê·∫£o l·ªëp</span>
                    </div>
                    <div class="rec-item">
                        <div class="checkbox" id="rec-4"></div>
                        <span>Thay th·∫ø</span>
                    </div>
                </div>
            </div>

            <div class="car-diagram">
                <img src="sodooto.png" alt="Car Diagram"> <svg class="car-svg" viewBox="0 0 160 240">
                    <g id="tire-measurements">
                        <g transform="translate(-50,45)"> 
                            <rect width="50" height="30" fill="white" stroke="#4472C4"/>
                            <text x="24" y="8" text-anchor="middle" fill="#4472C4">mm</text>
                            <text x="24" y="17" text-anchor="middle" fill="#4472C4" id="fl-display">0/0</text>
                        </g>
                        <g transform="translate(-50, 65)"> 
                            <rect width="50" height="20" fill="#4472C4"/>
                            <text x="24" y="11" text-anchor="middle" fill="white" id="fl-pressure-display-text">0</text>
                        </g>
                        
                        <g transform="translate(160, 40)"> 
                            <rect width="50" height="25" fill="white" stroke="#4472C4"/>
                            <text x="24" y="8" text-anchor="middle" fill="#4472C4">mm</text>
                            <text x="24" y="17" text-anchor="middle" fill="#4472C4" id="fr-display">0/0</text>
                        </g>
                        <g transform="translate(160, 65)"> 
                            <rect width="50" height="20" fill="#4472C4"/>
                            <text x="24" y="11" text-anchor="middle" fill="white" id="fr-pressure-display-text">0</text>
                        </g>
                        
                        <g transform="translate(-50, 140)"> 
                            <rect width="50" height="25" fill="white" stroke="#4472C4"/>
                            <text x="24" y="8" text-anchor="middle" fill="#4472C4">mm</text>
                            <text x="24" y="17" text-anchor="middle" fill="#4472C4" id="rl-display">0/0</text>
                        </g>
                        <g transform="translate(-50, 165)"> 
                            <rect width="50" height="20" fill="#4472C4"/>
                            <text x="24" y="11" text-anchor="middle" fill="white" id="rl-pressure-display-text">0</text>
                        </g>
                        
                        <g transform="translate(160, 140)"> 
                            <rect width="50" height="25" fill="white" stroke="#4472C4"/>
                            <text x="24" y="8" text-anchor="middle" fill="#4472C4">mm</text>
                            <text x="24" y="17" text-anchor="middle" fill="#4472C4" id="rr-display">0/0</text>
                        </g>
                        <g transform="translate(160, 165)"> 
                            <rect width="50" height="20" fill="#4472C4"/>
                            <text x="24" y="11" text-anchor="middle" fill="white" id="rr-pressure-display-text">0</text>
                        </g>
                        
                        <g transform="translate(56, 195)">
                            <rect width="48" height="18" fill="white" stroke="#4472C4"/>
                            <text x="24" y="7" text-anchor="middle" fill="#4472C4">mm</text>
                            <text x="24" y="15" text-anchor="middle" fill="#4472C4" id="spare-display">0</text>
                        </g>
                        <g transform="translate(56, 215)">
                            <rect width="48" height="14" fill="#4472C4"/>
                            <text x="24" y="9" text-anchor="middle" fill="white" id="spare-pressure-display-text">0</text>
                        </g>
                    </g>
                    
                    <text x="160" y="95" text-anchor="start" font-size="6" fill="#4472C4" transform="rotate(90, 160, 95)">√Åp su·∫•t khuy·∫øn c√°o</text>
                    <text x="160" y="195" text-anchor="start" font-size="6" fill="#4472C4" transform="rotate(90, 160, 195)">√Åp su·∫•t khuy·∫øn c√°o</text>

                    <rect x="55" y="100" width="50" height="20" fill="none" stroke="red" id="tire-size-box"/>
                    <text x="80" y="112" text-anchor="middle" alignment-baseline="middle" id="tire-size-text">Size L·ªëp</text>
                </svg>
            </div>

            <div class="note-section">
                <div style="display: flex; align-items: center; gap: 5px; margin-bottom: 8px;">
                    <div class="checkbox"></div>
                    <span style="font-weight: bold;">L∆ØU √ù: Ki·ªÉm tra & b∆°m l·ªëp d·ª± ph√≤ng</span>
                </div>
                
                <div style="margin-bottom: 8px;">
                    <span style="font-weight: bold;">HI·ªÜN TR·∫†NG L·ªêP:</span>
                    <span style="border-bottom: 1px dotted #333; display: inline-block; min-width: 200px; margin-left: 5px;" id="condition-display"></span>
                </div>
            </div>

            <div class="info-section">
                <div>
                    <div class="info-item" style="margin-bottom: 8px;">
                        <span style="font-weight: bold;">NG√ÄY:</span>
                        <span id="date-display" style="margin-left: 10px;"></span>
                        <span style="font-weight: bold; margin-left: 20px;">STT:</span>
                    </div>
                    <div class="info-item" style="margin-bottom: 8px;">
                        <span style="font-weight: bold;">BI·ªÇN S·ªê XE:</span>
                        <span id="plate-display" style="margin-left: 10px;"></span>
                    </div>
                    <div class="info-item">
                        <span style="font-weight: bold;">K·ª∏ THU·∫¨T VI√äN:</span>
                        <span id="tech-display" style="margin-left: 10px;"></span>
                    </div>
                </div>
                <div>
                    <div class="info-item">
                        <span style="font-weight: bold;">S·ªë ƒëi·ªán tho·∫°i:</span>
                        <span id="phone-display" style="margin-left: 10px;"></span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // ƒê·∫∑t ng√†y hi·ªán t·∫°i l√†m gi√° tr·ªã m·∫∑c ƒë·ªãnh cho input ng√†y
        document.getElementById('inspectionDate').value = new Date().toISOString().split('T')[0];

        /**
         * X√°c ƒë·ªãnh h√¨nh d·∫°ng (m√†u s·∫Øc) d·ª±a tr√™n ƒë·ªô s√¢u gai l·ªëp.
         * @param {number} depth - ƒê·ªô s√¢u gai l·ªëp (mm).
         * @returns {string} T√™n l·ªõp CSS t∆∞∆°ng ·ª©ng v·ªõi h√¨nh d·∫°ng.
         */
        function getDepthShape(depth) {
            if (depth > 4) return 'green-square'; // L·ªëp t·ªët
            else if (depth >= 3) return 'yellow-triangle'; // L·ªëp c·∫ßn ch√∫ √Ω
            else if (depth >= 1.6) return 'red-circle'; // L·ªëp c·∫ßn thay th·∫ø (1.6 - 3mm)
            else return 'red-circle'; // D∆∞·ªõi 1.6mm c≈©ng l√† ƒë·ªè
        }

        /**
         * C·∫≠p nh·∫≠t c√°c h√¨nh d·∫°ng hi·ªÉn th·ªã ƒë·ªô s√¢u gai l·ªëp cho t·ª´ng v·ªã tr√≠ l·ªëp.
         * @param {string} position - V·ªã tr√≠ l·ªëp (v√≠ d·ª•: 'fl', 'fr', 'rl', 'rr').
         * @param {number} innerDepth - ƒê·ªô s√¢u gai l·ªëp ph√≠a trong.
         * @param {number} outerDepth - ƒê·ªô s√¢u gai l·ªëp ph√≠a ngo√†i.
         */
        function updateTireShapes(position, innerDepth, outerDepth) {
            const shapesContainer = document.getElementById(position + '-shapes');
            shapesContainer.innerHTML = ''; // X√≥a c√°c h√¨nh d·∫°ng c≈©

            // T·∫°o v√† th√™m h√¨nh d·∫°ng cho ƒë·ªô s√¢u ph√≠a trong
            const innerShape = document.createElement('div');
            innerShape.className = 'shape ' + getDepthShape(innerDepth);
            // ƒêi·ªÅu ch·ªânh ki·ªÉu d√°ng ƒë·∫∑c bi·ªát cho tam gi√°c v√†ng ƒë·ªÉ hi·ªÉn th·ªã ƒë√∫ng
            if (getDepthShape(innerDepth) === 'yellow-triangle') {
                innerShape.style.width = '0';
                innerShape.style.height = '0';
                innerShape.style.borderLeft = '8px solid transparent';
                innerShape.style.borderRight = '8px solid transparent';
                innerShape.style.borderBottom = '12px solid #FFC000';
            } else {
                innerShape.style = ''; // Reset inline style if not a yellow-triangle
            }
            shapesContainer.appendChild(innerShape);

            // T·∫°o v√† th√™m h√¨nh d·∫°ng cho ƒë·ªô s√¢u ph√≠a ngo√†i
            const outerShape = document.createElement('div');
            outerShape.className = 'shape ' + getDepthShape(outerDepth);
            // ƒêi·ªÅu ch·ªânh ki·ªÉu d√°ng ƒë·∫∑c bi·ªát cho tam gi√°c v√†ng ƒë·ªÉ hi·ªÉn th·ªã ƒë√∫ng
            if (getDepthShape(outerDepth) === 'yellow-triangle') {
                outerShape.style.width = '0';
                outerShape.style.height = '0';
                outerShape.style.borderLeft = '8px solid transparent';
                outerShape.style.borderRight = '8px solid transparent';
                outerShape.style.borderBottom = '12px solid #FFC000';
            } else {
                outerShape.style = ''; // Reset inline style if not a yellow-triangle
            }
            shapesContainer.appendChild(outerShape);
        }

        /**
         * C·∫≠p nh·∫≠t c√°c khuy·∫øn ngh·ªã d·ª±a tr√™n d·ªØ li·ªáu nh·∫≠p v√† logic t·ª± ƒë·ªông.
         */
        function updateRecommendations() {
            // √Ånh x·∫° ID khuy·∫øn ngh·ªã t·ª´ data-rec-id sang ID c·ªßa checkbox hi·ªÉn th·ªã
            const recommendationsMap = {
                'can-chinh-thuoc-lai': 'rec-1',
                'can-bang-dong': 'rec-2',
                'dao-lop': 'rec-3',
                'thay-the': 'rec-4'
            };

            // X√≥a t·∫•t c·∫£ c√°c d·∫•u t√≠ch khuy·∫øn ngh·ªã hi·ªÉn th·ªã (ƒë·∫∑t l·∫°i m√†u n·ªÅn v·ªÅ tr·∫Øng)
            Object.values(recommendationsMap).forEach(id => {
                document.getElementById(id).style.background = 'white';
            });

            // X·ª≠ l√Ω c√°c khuy·∫øn ngh·ªã ƒë∆∞·ª£c ch·ªçn th·ªß c√¥ng t·ª´ checkbox (cho l·ªëp d·ª± ph√≤ng)
            document.querySelectorAll('.recommendation-checkboxes input[type="checkbox"]').forEach(checkbox => {
                if (checkbox.checked) {
                    const recId = checkbox.dataset.recId;
                    if (recommendationsMap[recId]) {
                        // ƒê·∫∑t m√†u n·ªÅn cho checkbox hi·ªÉn th·ªã n·∫øu ƒë∆∞·ª£c ch·ªçn
                        document.getElementById(recommendationsMap[recId]).style.background = '#4472C4';
                    }
                }
            });

            // Logic t·ª± ƒë·ªông ƒë∆∞a ra khuy·∫øn ngh·ªã d·ª±a tr√™n ƒë·ªô s√¢u gai l·ªëp
            const positions = ['fl', 'fr', 'rl', 'rr'];
            let needsReplacement = false; // C·ªù cho khuy·∫øn ngh·ªã thay th·∫ø
            let needsRotation = false;    // C·ªù cho khuy·∫øn ngh·ªã ƒë·∫£o l·ªëp

            positions.forEach(pos => {
                const inner = parseFloat(document.getElementById(pos + '-inner').value) || 0;
                const outer = parseFloat(document.getElementById(pos + '-outer').value) || 0;
                
                // N·∫øu ƒë·ªô s√¢u gai l·ªëp nh·ªè h∆°n 1.6mm (ng∆∞·ª°ng ph√°p l√Ω), c·∫ßn thay th·∫ø
                if (inner < 1.6 || outer < 1.6) {
                    needsReplacement = true;
                }
                // Logic v√≠ d·ª• cho ƒë·∫£o l·ªëp: n·∫øu s·ª± ch√™nh l·ªách gi·ªØa ƒë·ªô s√¢u trong v√† ngo√†i l·ªõn h∆°n 1mm
                if (Math.abs(inner - outer) > 1) { 
                    needsRotation = true;
                }
            });

            // √Åp d·ª•ng khuy·∫øn ngh·ªã t·ª± ƒë·ªông
            if (needsReplacement) {
                document.getElementById('rec-4').style.background = '#4472C4'; // ƒê√°nh d·∫•u "Thay th·∫ø"
            }
            if (needsRotation) {
                document.getElementById('rec-3').style.background = '#4472C4'; // ƒê√°nh d·∫•u "ƒê·∫£o l·ªëp"
            }
        }

        /**
         * C·∫≠p nh·∫≠t b·∫£n xem tr∆∞·ªõc c·ªßa phi·∫øu in v·ªõi d·ªØ li·ªáu hi·ªán t·∫°i t·ª´ form.
         */
        function updatePreview() {
            // C·∫≠p nh·∫≠t th√¥ng tin c∆° b·∫£n
            document.getElementById('condition-display').textContent = document.getElementById('tireOverallCondition').value;
            document.getElementById('date-display').textContent = document.getElementById('inspectionDate').value;
            document.getElementById('plate-display').textContent = document.getElementById('licensePlate').value;
            document.getElementById('tech-display').textContent = document.getElementById('technician').value;
            document.getElementById('phone-display').textContent = document.getElementById('phoneNumber').value;

            // C·∫≠p nh·∫≠t Size l·ªëp tr√™n SVG
            document.getElementById('tire-size-text').textContent = document.getElementById('tireSizeInput').value || 'Size L·ªëp';

            // C·∫≠p nh·∫≠t c√°c th√¥ng s·ªë ƒëo l·ªëp v√† h√¨nh d·∫°ng tr√™n s∆° ƒë·ªì xe
            const positions = ['fl', 'fr', 'rl', 'rr'];
            positions.forEach(pos => {
                const inner = parseFloat(document.getElementById(pos + '-inner').value) || 0;
                const outer = parseFloat(document.getElementById(pos + '-outer').value) || 0;
                const pressure = parseFloat(document.getElementById(pos + '-pressure').value) || 0;

                // C·∫≠p nh·∫≠t hi·ªÉn th·ªã ƒë·ªô s√¢u gai l·ªëp (v√≠ d·ª•: "3.5/3.2")
                document.getElementById(pos + '-display').textContent = inner.toFixed(1) + '/' + outer.toFixed(1); 
                // C·∫≠p nh·∫≠t hi·ªÉn th·ªã √°p su·∫•t l·ªëp
                document.getElementById(pos + '-pressure-display-text').textContent = pressure.toFixed(1);
                // C·∫≠p nh·∫≠t c√°c h√¨nh d·∫°ng m√†u s·∫Øc bi·ªÉu th·ªã ƒë·ªô s√¢u gai l·ªëp
                updateTireShapes(pos, inner, outer);
            });

            // C·∫≠p nh·∫≠t th√¥ng s·ªë l·ªëp d·ª± ph√≤ng
            const spareDepth = parseFloat(document.getElementById('spare-depth').value) || 0;
            const sparePressure = parseFloat(document.getElementById('spare-pressure').value) || 0;
            document.getElementById('spare-display').textContent = spareDepth.toFixed(1); 
            document.getElementById('spare-pressure-display-text').textContent = sparePressure.toFixed(1);

            // C·∫≠p nh·∫≠t c√°c khuy·∫øn ngh·ªã (bao g·ªìm c·∫£ logic checkbox m·ªõi)
            updateRecommendations();
        }

        /**
         * K√≠ch ho·∫°t ch·ª©c nƒÉng in phi·∫øu.
         */
        function printForm() {
            updatePreview(); // ƒê·∫£m b·∫£o d·ªØ li·ªáu xem tr∆∞·ªõc ƒë∆∞·ª£c c·∫≠p nh·∫≠t tr∆∞·ªõc khi in

            // T·∫°o CSS t√πy ch·ªânh cho vi·ªác in (ƒë·∫∑c bi·ªát l√† k√≠ch th∆∞·ªõc A5)
            const printCSS = `
                @page {
                    size: A5 portrait; /* ƒê·∫∑t k√≠ch th∆∞·ªõc trang in l√† A5 v√† h∆∞·ªõng d·ªçc */
                    margin: 3mm; /* L·ªÅ ƒë·ªÅu 3mm cho t·∫•t c·∫£ c√°c c·∫°nh */
                }
                @media print {
                    body {
                        margin: 0;
                        padding: 0;
                        background: white;
                        -webkit-print-color-adjust: exact !important; 
                        color-adjust: exact !important; 
                    }
                    .container {
                        box-shadow: none;
                        max-width: none;
                    }
                    .form-section, .controls {
                        display: none; 
                    }
                    .print-section {
                        width: 148mm;
                        height: 205mm; /* ƒê·∫£m b·∫£o chi·ªÅu cao v·ª´a v·ªõi A5 (210mm - 5mm l·ªÅ t·ªïng c·ªông) */
                        margin: 0;
                        padding: 7mm; /* Gi·ªØ nguy√™n l·ªÅ ƒë·ªÉ n·ªôi dung kh√¥ng b·ªã s√°t m√©p */
                        font-size: 11px; /* √Åp d·ª•ng font size cho in */
                        line-height: 1.25;
                    }
                    /* ƒê·∫£m b·∫£o c√°c font size ƒë∆∞·ª£c √°p d·ª•ng khi in */
                    .tire-measurements text {
                        font-size: 8px !important;
                    }
                    .tire-measurements rect {
                        stroke-width: 0.6 !important;
                    }
                    .tire-measurements g[transform*="translate"] rect {
                        width: 48px !important;
                        height: 20px !important;
                    }
                    .tire-measurements g[transform*="translate"] text {
                        font-size: 8px !important;
                    }
                    .tire-measurements g[transform*="translate"] rect[fill="#4472C4"] {
                        height: 16px !important;
                    }
                    .tire-measurements g[transform*="translate"] text[fill="white"] {
                        font-size: 7px !important;
                    }
                    #tire-size-box {
                        stroke-width: 1.1 !important;
                    }
                    #tire-size-text {
                        font-size: 10px !important;
                        font-weight: bold !important;
                    }
                    .logo {
                        width: 65px !important;
                        height: 65px !important;
                        font-size: 26px !important;
                    }
                    .qr-code {
                        width: 45px !important;
                        height: 45px !important;
                        font-size: 9px !important;
                    }
                    .company-name {
                        font-size: 17px !important;
                    }
                    .company-details {
                        font-size: 10.5px !important;
                    }
                    .title {
                        font-size: 15px !important;
                    }
                    .legend-title {
                        font-size: 12px !important;
                    }
                    .legend-item {
                        font-size: 11px !important;
                    }
                    .shape {
                        width: 16px !important;
                        height: 11px !important;
                    }
                    .yellow-triangle {
                        border-left: 9px solid transparent !important;
                        border-right: 9px solid transparent !important;
                        border-bottom: 13px solid #FFC000 !important;
                    }
                    .position {
                        font-size: 11px !important;
                    }
                    .rec-title {
                        font-size: 12px !important;
                    }
                    .rec-item {
                        font-size: 10.5px !important;
                    }
                    .checkbox {
                        width: 13px !important;
                        height: 13px !important;
                    }
                    .note-section {
                        font-size: 11px !important;
                    }
                    .info-section {
                        font-size: 12px !important;
                    }
                }
            `;
            
            // Th√™m CSS n√†y v√†o head c·ªßa t√†i li·ªáu ƒë·ªÉ √°p d·ª•ng khi in
            const style = document.createElement('style');
            style.textContent = printCSS;
            document.head.appendChild(style);
            
            // G·ªçi l·ªánh in c∆° b·∫£n
            window.print();
            
            // X√≥a CSS t√πy ch·ªânh sau khi in ƒë·ªÉ kh√¥ng ·∫£nh h∆∞·ªüng ƒë·∫øn hi·ªÉn th·ªã b√¨nh th∆∞·ªùng
            setTimeout(() => {
                document.head.removeChild(style);
            }, 1000); 
        }

        // T·ª± ƒë·ªông c·∫≠p nh·∫≠t b·∫£n xem tr∆∞·ªõc khi c√≥ b·∫•t k·ª≥ thay ƒë·ªïi n√†o trong c√°c tr∆∞·ªùng input ho·∫∑c checkbox
        document.addEventListener('input', function(e) {
            // Ch·ªâ c·∫≠p nh·∫≠t n·∫øu ph·∫ßn t·ª≠ thay ƒë·ªïi l√† m·ªôt input ho·∫∑c m·ªôt checkbox trong nh√≥m khuy·∫øn ngh·ªã
            if (e.target.tagName === 'INPUT' || (e.target.tagName === 'INPUT' && e.target.type === 'checkbox' && e.target.closest('.recommendation-checkboxes'))) {
                updatePreview();
            }
        });

        // Kh·ªüi t·∫°o b·∫£n xem tr∆∞·ªõc khi trang ƒë∆∞·ª£c t·∫£i l·∫ßn ƒë·∫ßu
        updatePreview();
    </script>
</body>
</html>
